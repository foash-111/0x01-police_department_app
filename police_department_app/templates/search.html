<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/static/css/styles.css">

</head>
<body>
    <h1>البحث عن شخص</h1>
<form id="searchForm">
    <label for="searchInput">البحث حسب الاسم أو الرقم القومي</label>
    <input type="text" id="searchInput" name="searchInput" placeholder="ادخل الاسم أو الرقم القومي">
    <button type="submit">بحث</button>
</form>

<div id="results" class="search-results"></div>

<button onclick="goBack()" class="back-button">رجوع</button>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // Handle form submission using AJAX
    $('#searchForm').on('submit', function(event) {
        event.preventDefault();  // Prevent the default form submission

        // Get the search input
        const searchInput = $('#searchInput').val();

        // Send AJAX request to the server
        $.ajax({
            type: 'POST',
            url: '/search_person',  // Flask route URL
            data: { 
                name: searchInput,  // Send input as 'name' (adjust based on backend handling)
                id_number: searchInput  // Send input as 'id_number' (if applicable)
            },
            success: function(response) {
                // Clear previous results
                $('#results').empty();

                // Check if any results are returned
                if (response.length > 0) {
                    // Iterate over each result and display it
                    response.forEach(function(person) {
                        $('#results').append('<p>الاسم: ' + person.name + ' - الرقم القومي: ' + person.id_number + '</p>');
                    });
                } else {
                    // Show no results found
                    $('#results').append('<p>لم يتم العثور على نتائج.</p>');
                }
            },
            error: function(error) {
                console.log('Error:', error);
                $('#results').append('<p>حدث خطأ أثناء البحث.</p>');
            }
        });
    });
</script>
<script src="/static/js/script.js"></script>
</body>
</html>
